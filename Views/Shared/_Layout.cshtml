@*
*@
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="~/lib/toastr/toastr.min.css" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Dental Clinic Management System</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            /* إزالة display: flex من body */
            /* background-color: #f4f6f8; 👈 إزالة هذا اللون */
            min-height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            /* 👈 إضافة خلفية افتراضية للجسم كله */
            background-color: #003366;
        }


        .main-content {
            /* تغيير الـ flex: 1 إلى عرض ثابت */
            /* إزالة الـ flex: 1; */
            margin-left: 260px;
            padding: 30px;
            /* 👈 الأهم: تحديد الخلفية البيضاء للمحتوى ليعزلها عن خلفية الـ body الزرقاء */
            background-color: #f4f6f8;
            min-height: 100vh; /* تأكد أن المحتوى على الأقل يغطي ارتفاع الشاشة */
        }
        /* ضمان أن كل Toast له لون واضح */
        #toast-container .toast {
            opacity: 1 !important;
            color: #fff !important;
            direction: rtl;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        /* نجاح - أخضر */
        #toast-container .toast-success {
            background-color: #28a745 !important; /* أخضر */
        }

        /* حذف أو خطأ - أحمر */
        #toast-container .toast-error {
            background-color: #dc3545 !important; /* أحمر */
        }

        /* تعديل أو معلومة - أزرق */
        #toast-container .toast-info {
            background-color: #17a2b8 !important; /* أزرق */
        }

        /* تحذير - أصفر (لو حابب تستخدمه) */
        #toast-container .toast-warning {
            background-color: #ffc107 !important;
            color: #212529 !important;
        }

        body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f6f8;
            font-family: 'Segoe UI', sans-serif;
        }

        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #003366 0%, #003366 100%);
            color: white;
            display: flex;
            flex-direction: column;
            padding: 20px;
            position: fixed;
            height: 100%;
            /* 👈 التعديل هنا */
            overflow-y: auto;
            /* ---------------- */
            transition: transform 0.3s ease-in-out;
        }

            .sidebar h4 {
                font-size: 1.4rem;
                margin-bottom: 20px;
                font-weight: bold;
                text-align: center;
            }

        .nav-link {
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.2s;
        }

            .nav-link:hover,
            .nav-link.active {
                background-color: rgba(0, 102, 204, 0.2); /* أزرق فاتح شفاف */
                color: #1e90ff; /* لون أزرق مميز للنص */
                transform: translateX(5px);
                transition: all 0.3s ease;
            }

        /* Content area */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 30px;
            /* إضافة خاصية الانتقال لتجنب تغيير الحجم المفاجئ */
            transition: margin-left 0.3s ease-in-out;
        }

        header {
            background: white;
            padding: 15px 25px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

            header h2 {
                margin: 0;
                font-size: 1.5rem;
                color: #003366;
            }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #003366;
            font-weight: 500;
        }

            .user-info i {
                font-size: 1.4rem;
            }

        footer {
            margin-top: 50px;
            text-align: center;
            padding: 10px;
            background: black;
            border-top: 1px solid #ddd;
            color: white;
            font-size: 0.9rem;
        }

        img {
            wigth: 50px;
            height: 50px;
        }

        /* -------------------------------------- */
        /* 📱 التعديلات للمظهر المتجاوب (Responsive Design) */
        /* -------------------------------------- */

        /* لإخفاء زر قائمة الهامبرغر افتراضيًا على الشاشات الكبيرة */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0;
        }

        /* أسلوب overlay عند ظهور القائمة في شاشات الجوال */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1040;
            display: none;
            transition: opacity 0.3s ease-in-out;
        }

            .overlay.active {
                display: block;
            }

        /* 💻 الشاشات الكبيرة (Desktop - أكثر من 992px) */
        @@media (min-width: 992px) {
            .main-content

        {
            /* إبقاء الهامش الأيسر على الشاشات الكبيرة */
            margin-left: 260px;
        }

        .sidebar {
            /* إبقاء شريط التنقل ثابتًا ومرئيًا على الشاشات الكبيرة */
            position: fixed;
            height: 100%;
            transform: translateX(0);
        }

        }


        /* 📱 الشاشات الصغيرة والمتوسطة (Tablet & Mobile - أقل من 992px) */
        @@media (max-width: 991.98px) {
            body

        {
            /* إزالة display: flex لتسهيل إدارة الـ width: 100% */
            display: block;
        }

        /* 1. الشريط الجانبي (Sidebar) */
        .sidebar {
            width: 260px;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1050; /* تأكد أنه يظهر فوق المحتوى */
            transform: translateX(-100%); /* إخفاؤه عن طريق تحريكه لليسار */
        }

            .sidebar.active {
                transform: translateX(0); /* إظهار شريط التنقل عند التفعيل */
            }

        /* 2. منطقة المحتوى الرئيسية (Main Content) */
        .main-content {
            /* إزالة الهامش الأيسر الثابت وجعل العرض كاملاً */
            margin-left: 0;
            width: 100%;
            padding: 15px; /* تقليل الـ padding ليناسب شاشات الجوال */
        }

        /* 3. شريط الرأس (Header) */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 15px;
            /* تعديل تنسيق الـ header ليناسب زر القائمة */
            flex-direction: row-reverse; /* وضع زر القائمة على اليسار (لأن الواجهة RTL) */
        }

        /* إظهار زر قائمة الهامبرغر */
        .menu-toggle {
            display: block;
            color: #003366; /* لون مناسب للزر في الشريط العلوي الأبيض */
            margin-right: 15px;
        }

        header h2 {
            font-size: 1.3rem; /* تصغير حجم العنوان */
        }

        .user-info {
            gap: 5px; /* تقليل المسافة بين الأيقونة والنص */
        }

        }

        /* 📱 شاشات الجوال الصغيرة جداً (أقل من 576px) */
        @@media (max-width: 576px) {
            header h2

        {
            display: none; /* إخفاء العنوان في الهيدر لزيادة المساحة */
        }

        .user-info span {
            display: none; /* إخفاء اسم المستخدم والإبقاء على الأيقونة فقط */
        }

        .main-content {
            padding: 10px; /* تقليل الـ padding أكثر */
        }

        }
    </style>
</head>

<body>
    <div class="sidebar">
        <h4>
            <img class="logo custom-logo" src="~/images/logo1.png" alt="شعار العيادة"> Clinic Admin
        </h4>
        <a asp-controller="User" asp-action="Index" class="nav-link">
            <i class="bi bi-person-lines-fill"></i> Users
        </a>

        <a asp-controller="Patient" asp-action="Index" class="nav-link">
            <i class="bi bi-person-lines-fill"></i> Patients
        </a>
        <a asp-controller="Appointment" asp-action="Index" class="nav-link d-flex align-items-center gap-2">
            <i class="bi bi-calendar-event fs-5 text-white"></i>
            <span>Appointments</span>
        </a>
        <a asp-controller="AppointmentP" asp-action="Index" class="nav-link d-flex align-items-center gap-2">
            <i class="bi bi-calendar-event fs-5 text-white"></i>
            <span>Package Appointments</span>
        </a>
        <a asp-controller="Doctor" asp-action="Index" class="nav-link d-flex align-items-center gap-2" asp-route-id="1">
            <i class="bi bi-person-heart fs-5 text-white"></i>
            <span>Doctors</span>
        </a>

        <a asp-controller="Nurses" asp-action="Index" class="nav-link">
            <i class="bi bi-heart-pulse"></i> Nurses
        </a>

        <a asp-controller="Staff" asp-action="Index" class="nav-link">
            <i class="bi bi-people-fill"></i> Staff
        </a>

        <a asp-controller="Services" asp-action="Index" class="nav-link">
            <i class="bi bi-clipboard2-pulse"></i> Services
        </a>

        <a asp-controller="Package" asp-action="Dashboard" class="nav-link">
            <i class="bi bi-clipboard2-pulse"></i> Packages
        </a>
        <a asp-controller="Feedback" asp-action="AdminList" class="nav-link">
            <i class="bi bi-clipboard2-pulse"></i> View Comments
        </a>



        <div style="margin-top:auto;">
            <hr style="border-color: rgba(255,255,255,0.3);" />
            <a asp-controller="Home" asp-action="Index" class="nav-link">
                <i class="bi bi-box-arrow-right"></i> Logout
            </a>
        </div>
        <div style="margin-top:auto;">
            <hr style="border-color: rgba(255,255,255,0.3);" />
            <a asp-controller="Home" asp-action="HomePage" class="nav-link">
                <i class="bi bi-box-arrow-right"></i> Logout for front
            </a>
        </div>
    </div>

    <div class="overlay" id="sidebarOverlay"></div>

    <div class="main-content">
        <header>
            <button class="menu-toggle" aria-label="Toggle navigation" id="menuToggle">
                <i class="bi bi-list"></i>
            </button>
            <h2>@ViewData["Title"]</h2>
            <a asp-controller="Profile" asp-action="Index" class="user-info text-decoration-none">
                <i class="bi bi-person-circle"></i>
                <span>Admin</span>
            </a>
        </header>

        <main class="mt-4">
            @RenderBody()
        </main>
        @RenderSection("Scripts", required: false)

        <footer>
            &copy; @DateTime.Now.Year - Dental Clinic Management System | Developed By Our Team
        </footer>
    </div>
    <script src="~/lib/jquery/jquery-3.6.0.min.js"></script>
    <script src="~/lib/toastr/toastr.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script>
        toastr.options = {
            closeButton: true,
            progressBar: true,
            positionClass: "toast-top-right",
            rtl: true,
            timeOut: 5000,
            extendedTimeOut: 1000,
            preventDuplicates: true
        };

        (function () {
        @if (TempData["Success"] != null)
        {
                    <text>toastr.success('@Html.Raw(TempData["Success"])'); </text>
        }
        @if (TempData["Error"] != null)
        {
                    <text>toastr.error('@Html.Raw(TempData["Error"])'); </text>
        }
        @if (TempData["Delete"] != null)
        {
                    <text>toastr.error('@Html.Raw(TempData["Delete"])'); </text>
        }
        @if (TempData["Info"] != null)
        {
                    <text>toastr.info('@Html.Raw(TempData["Info"])'); </text>
        }
        @if (TempData["Warning"] != null)
        {
                    <text>toastr.warning('@Html.Raw(TempData["Warning"])'); </text>
        }
            })();


        // كود الـ JavaScript للقائمة المتجاوبة
        document.addEventListener('DOMContentLoaded', function () {
            const menuToggle = document.getElementById('menuToggle');
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.getElementById('sidebarOverlay');

            function toggleSidebar() {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            }

            if (menuToggle) {
                menuToggle.addEventListener('click', toggleSidebar);
            }
            if (overlay) {
                overlay.addEventListener('click', toggleSidebar);
            }

            // إغلاق القائمة عند النقر على أي رابط بداخلها
            const navLinks = sidebar.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (sidebar.classList.contains('active')) {
                        toggleSidebar();
                    }
                });
            });
        });

    </script>
</body>
</html>